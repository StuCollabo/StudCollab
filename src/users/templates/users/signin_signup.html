{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StuCollab - Login & Signup</title>
    <link rel="stylesheet" href="{% static 'css/signin_signup.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="background"></div>
    
    <header class="header">
        <a href="{% url 'home' %}" class="logo">
            <i class="fas fa-users-between-lines"></i>
            StuCollab
        </a>
    </header>

    <div class="container">
        <!-- Left Side -->
        <div class="info-side">
            <h2>Collaborate, share, advance.</h2>
            <p>Platform where students create groups, share documents, and work as a team.</p>
            <div class="features">
                <div><i class="fas fa-check-circle"></i> Key Features</div>
                <div><i class="fas fa-graduation-cap"></i> School Collaboration</div>
                <div><i class="fas fa-shield-alt"></i> Secure & Intelligent</div>
            </div>
        </div>

        <!-- Right Side - Forms -->
        <div class="form-side">
            <div class="form-box">
                <h1 id="formTitle">Welcome Back</h1>
                
                <!-- Tabs -->
                <div class="tabs">
                    <button id="loginTab" class="active" onclick="showForm('login')">Sign In</button>
                    <button id="registerTab" onclick="showForm('register')">Sign Up</button>
                </div>

                <!-- Messages -->
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert">{{ message }}</div>
                    {% endfor %}
                {% endif %}

                <!-- Login Form -->
                <form id="loginForm" class="form active" method="POST">
                    {% csrf_token %}
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        {{ signin_form.username }}
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        {{ signin_form.password }}
                    </div>
                    <a href="#" class="forgot">Forgot password?</a>
                    <button type="submit" name="signin_submit">Sign In</button>
                </form>

                <!-- Register Form -->
                <form id="registerForm" class="form" method="POST">
                    {% csrf_token %}
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        {{ signup_form.username }}
                    </div>
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        {{ signup_form.email }}
                    </div>
                    <div style="position: relative;">
                      <div class="input-group">
                        <i class="fas fa-lock"></i>
                          {{ signup_form.password1 }}
                      </div>
                        <i class="fas fa-eye password-toggle" onclick="togglePassword('id_password1')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; pointer-events: auto;"></i>
                    </div>

                    <div style="position: relative;">
                      <div class="input-group">
                        <i class="fas fa-lock"></i>
                         {{ signup_form.password2 }}
                      </div>
                        <i class="fas fa-eye password-toggle" onclick="togglePassword('id_password2')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; pointer-events: auto;"></i>
                    </div>
                    <button type="submit" name="signup_submit">Sign Up</button>
                </form>
            </div>
            
            <button class="btn-trial" onclick="showForm('register')">
                <i class="fas fa-rocket"></i> Try for Free
            </button>
        </div>
    </div>

    <script>
        function showForm(form) {
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const loginTab = document.getElementById('loginTab');
            const registerTab = document.getElementById('registerTab');
            const title = document.getElementById('formTitle');

            loginForm.classList.remove('active');
            registerForm.classList.remove('active');
            loginTab.classList.remove('active');
            registerTab.classList.remove('active');

            if(form === 'login') {
                loginForm.classList.add('active');
                loginTab.classList.add('active');
                title.textContent = 'Welcome Back';
            } else {
                registerForm.classList.add('active');
                registerTab.classList.add('active');
                title.textContent = 'Create Account';
            }
        }
        function togglePassword(fieldId) {
          const field = document.getElementById(fieldId);
          const icon = field.parentElement.querySelector('.password-toggle');
    
          if (field.getAttribute('type') === 'password') {
            field.setAttribute('type', 'text');
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
          } else {
            field.setAttribute('type', 'password');
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
          }
        }
    </script>
</body>
</html>
